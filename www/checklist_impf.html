<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="stylefiles/global_styles.css">
    <link rel="stylesheet" href="stylefiles/functional_styles.css">

    <script src="jquery/jquery-3.7.1.min.js"></script>

    <!-- Add icon library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!--    Check whether to download the icon libarary or the icons-->

    <script src="global_scripts.js"></script>
    <title>Risiko-Checkliste</title>

    <style media="print">
        @media print {
            @page {
                /*size: A4 landscape;*/
                size: A4 portrait;
            }

            .no-print, .zoomed-canvas, .canvas-zoom {
                display: none;
            }

            body {
                margin: 0;
                min-height: 100vh;
                min-width: 100vw;
                background-color: #1abc9c;
                /*width: 90vw;*/
                /*height: 100%;*/
                /*writing-mode: tb-rl;*/
            }

            .content-cell {
                width: 100%;
            }

            .checklist-content {
                margin: 0;
                /*width: 100%;*/
                width: 100%;
                height: 100%;
                background-color: #1abc9c;
            }

            .checklist-question.checklist-results {
                box-shadow: none;
                border: transparent;
                width: 100%;
                height: 100%;
                margin: 0;
                display: block;
                background-color: #1abc9c;
                /*position: relative;*/
            }
        }


    </style>

</head>
<body>

<!--Header filled in via JS-->
<div id="header-section" class="no-print">
</div>


<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ MAIN CONTENT ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
<div class="row current-theme">

    <p class="no-print">
        Anmerkungen: Aktuelle Reihenfolge anhand von Informationen in Beispiel Pressemitteilung.
        Anpassung auf Abfrage nach Quelle (PM, Studie, Nachrichtenartikel) hin denkbar.
    </p>

    <!--        <div class="canvas-container">-->
    <!--            <canvas id="dotdisplay2"></canvas>-->
    <!--        </div>-->
    <!--    <i class="fa fa-solid fa-user"></i>-->
</div>

<div class="row current-theme">
    <div class="checklist-content">
        <!--    Entry 1-->
        <table>
            <tr>
                <td class="nav-cell no-print">
                    <div class="checklist-nav">
                        <i class="fa fa-solid fa-chevron-up back-btn" style="rotate: -90deg"></i>
                    </div>
                </td>
                <td class="content-cell">

                    <div id="noentry-popup" class="error-prompt">
                        <p>Bitte geben Sie alle Zahlen ein, die Ihnen vorliegen.
                            Wenn Ihnen die fehlenden Angaben nicht vorliegen, klicken Sie auf "Weiter ohne Eingabe".</p>
                        <button id="input-missing">Zurück zur Eingabe</button>
                        <br>
                        <button id="skip-missing" class="continue-btn">Weiter ohne Eingabe</button>
                    </div>

                    <div id="incompatible-popup" class="error-prompt">
                        <p>
                            Ihre Eingaben widersprechen einander.
                            Bitte überprüfen Sie Ihre Eingaben nochmals sorgfältig.
                        </p>
                        <p class="instruction-par">
                            Es ist möglich, dass Ihre vorliegenden Informationen widersprüchlich sind.
                            In diesem Fall prüfen Sie bitte, wie die Ergebnisse für
                            <emph>Wirksamkeit (relative Riskikoreduktion)</emph>
                            <strong>mit entweder</strong>
                            der Anzahl an Fällen
                            <emph>unter den Behandelten</emph>
                            <strong>oder</strong>
                            der Anzahl an Fällen
                            <emph>unter den nicht-Behandelten (Placebo- oder Vergleichsgruppe)</emph>
                            .
                        </p>
                        <button id="acknowledge-incompatible">Zurück zur Eingabe</button>
                    </div>


                    <div class="checklist-question" id="rel-risk-reduction-q">

                        <div class="question-content">
                            <p class="checklist-qtext">Welche Wirksamkeit oder Effektivität wurde angegeben? (Englisch:
                                Effectivity)</p>
                            <p>
                                Bitte geben Sie die
                                <span class="highlight-num tooltip">
                                    Wirksamkeit
                                    <span class="tooltiptext tooltip-checklist">
                                        <i class="fa fa-exclamation-triangle"></i>
                                Manchmal wird diese Zahl auch als "Impfschutz" bezeichnet.
                                        <!--                                <strong>Weitere Begriffe?</strong>-->
                                        <br>
                                        Unter dem Begriff der Impfstoffwirksamkeit versteht man in der Regel,
                                wie viele Prozent weniger in der Gruppe der Geimpften erkranken.
                        </span>
                                </span>
                                in Prozent an.
                                <!--                                [Sinnvoll?]-->
                            </p>

                            <p>
                                <input class="checklist-input" id="rel-risk-reduction" type="text">&nbsp;%
                                <span class="tooltip delete-entry">
                                <i class="fa fa-trash" aria-hidden="true" id="rel-risk-reduction-del"></i>
                                <span class="tooltiptext tooltip-checklist">
                                   Eintrag löschen
                                </span>
                                </span>


                                <!--                                <button class="checklist-button continue-btn">Weiter</button>-->
                            </p>


                            <!--                            <p>-->
                            <!--                                [Als tooltip!]-->
                            <!--                                <i class="fa fa-exclamation-triangle"></i>-->
                            <!--                                Manchmal wird diese Zahl auch als "Impfschutz" bezeichnet.-->
                            <!--                                <strong>Weitere Begriffe?</strong>-->
                            <!--                            </p>-->

                            <!--                            <p>Unter dem Begriff der Impfstoffwirksamkeit versteht man in der Regel,-->
                            <!--                                wie viele Prozent weniger in der Gruppe der Geimpften erkranken.</p>-->

                            <!--                            <p>Anmerkung: Wenn die Information fehlt, wird nachgefragt.</p>-->
                        </div>


                    </div>


                    <div class="checklist-question" id="n-total-q">
                        <div class="question-content">
                            <p class="checklist-qtext">
                                Wie viele Personen haben insgesamt an der Studie teilgenommen?
                            </p>
                            <input class="checklist-input" id="n-total" type="text">
                            <br>
                            <button class="checklist-button continue-btn">Weiter</button>
                        </div>
                    </div>

                    <div class="checklist-question" id="any-control-q">
                        <p>Gab es eine Kontrollgruppe?</p>

                        <button class="checklist-button continue-btn input-btn" value="1">Ja</button>
                        <button class="checklist-button continue-btn input-btn" value="0">Nein</button>
                        <button class="checklist-button continue-btn input-btn" value="-1">Weiß nicht</button>

                    </div>

                    <div class="checklist-question" id="n-treat-control-q">
                        <div class="question-content">
                            <p class="checklist-qtext">Wie viele Personen wurden Geimpft? Wie viele bekamen ein
                                Placebo?</p>

                            <label>
                                Anzahl Geimpfte
                                <input class="checklist-input" id="n-impf" type="text">
                            </label>
                            <br>
                            <label>
                                Anzahl ungeimpfte (z.B. Placebo)
                                <input class="checklist-input" id="n-control" type="text">
                            </label>
                            <br>
                        </div>

                    </div>

                    <div class="checklist-question" id="p-treat-q">
                        <div class="question-content">
                            <p class="checklist-qtext">Welcher Anteil der Personen wurde geimpft?</p>

                            <!--                            ACHTUNG: Plausible Ganzzahlen ggf. umformulieren!-->
                            <input class="checklist-input" id="p-treat" type="text">

                            <br>
                            <button class="checklist-button continue-btn">Weiter</button>
                        </div>
                    </div>

                    <div class="checklist-question" id="n-case-q">
                        <div class="question-content">
                            <p class="checklist-qtext">
                                Wie viele Personen sind jeweils in der Impfgruppe und der Kontrollgruppe erkrankt?
                            </p>
                            <!--                        TODO: Eventually translate to grid layout?-->
                            <table>
                                <tr>
                                    <td>
                                        <label for="n-case-impf">
                                            Erkrankungen unter den Geimpften</label>
                                    </td>
                                    <td>
                                        <input class="checklist-input" id="n-case-impf" name="n-case-impf" type="text">
                                    </td>
                                </tr>
                                <tr>
                                    <td><label for="n-case-control">
                                        Erkrankungen in der Kontrollgruppe (Placebogruppe/Ungeimpfte)
                                    </label></td>
                                    <td>
                                        <input class="checklist-input" id="n-case-control" name="n-case-control"
                                               type="text">
                                    </td>
                                </tr>
                            </table>

                        </div>
                    </div>

                    <div class="checklist-question" id="or-case-q">
                        <div class="question-content">
                            <p class="checklist-qtext">QUESTION ABOUT ODDS RATIOS FOR ARTICLES?</p>
                            <input class="checklist-input" id="or-case" type="text">
                            <!--                        <br>-->
                            <!--                        <button class="checklist-button continue-btn">Weiter</button>-->
                        </div>
                    </div>

                    <div class="checklist-question" id="n-side-q">
                        <div class="question-content">
                            <p class="checklist-qtext">Für wie viele Personen wurden Nebenwirkungen berichtet?</p>
                            <p>
                                Ask for both groups if there was a control group?
                                Ask, which side effects were reported?!
                            </p>
                            <input class="checklist-input" id="n-side" type="text">
                            <br>
                            <button class="checklist-button continue-btn">Weiter</button>
                        </div>
                    </div>

                    <div class="checklist-question checklist-results" id="results-q">

                        <!--                        [FAKTENBOX?]-->

                        <div class="split-content">

                            <div class="output-col number-output">
                                <p><strong>Nutzen:</strong></p>
                                <hr>
                                <p>In der Behandlungsgruppe erkranken <span class="risk-info" id="risk-treat"></span>
                                </p>
                                <p>In der Kontrollgruppe erkranken <span class="risk-info" id="risk-control"></span></p>
                                <p id="abs-change"></p>
                                <p id="rel-change"></p>
                            </div>

                            <!--    The results from providing numbers:-->
                            <div class="output-col figure-output">

                                <div class="canvas-container">
                                    <canvas id="dotdisplay-treat" class="canvas-base"></canvas>
                                </div>

                                <div class="canvas-container">
                                    <canvas id="dotdisplay-control" class="canvas-base"></canvas>
                                </div>
                            </div>

                        </div>

                        <div class="split-content">
                            <div>
                                <p><strong>Schaden:</strong></p>
                            </div>
                            <div>

                            </div>
                        </div>

                        <button class="button-print-or-save-document checklist-button no-print">Ergebnis drucken
                        </button>
                        <!--                        <br>-->
                        <!--                        [SPLIT THE ARRAY?]-->
                    </div>

                </td>
                <td class="nav-cell no-print">
                    <div class="checklist-nav">
                        <i class="fa fa-solid fa-chevron-up continue-btn" style="rotate: 90deg"></i>
                    </div>
                </td>
            </tr>
        </table>
    </div>

</div>

<div class="canvas-zoom no-print">
    <!--        <span id="quit-zoom">X</span>-->
    <canvas id="dotdisplay-treat-zoom" class="zoomed-canvas"></canvas>
    <canvas id="dotdisplay-control-zoom" class="zoomed-canvas"></canvas>
</div>

<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ EOF MAIN CONTENT ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<!-- Footer -->
<div class="footer no-print"></div>


<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
<!--Space for scripts-->
<script src="scripts/calculate_risk.js"></script>
<script src="scripts/handle_checklist.js"></script>


</body>
